!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t){"use strict";function n(e){return e?o?o.call(e):(""+e).replace(/^\s+|\s+$/g,""):e}var r=window.PAGE_TIMING||{},i=function(){this.config={rate:parseInt(r.rate,10),resourceRate:2,filterRegular:"googlebot|bingbot|yahoo|baidu"},this.context={isSend:!1,timing:null}},o=String.prototype.trim;i.prototype={init:function(e){this.config=e||this.config;var t=this;if(!r.receiverUrl)return!1;try{document.addEventListener?window.addEventListener("load",function(){t._onloadAction.apply(t)},!1):document.attachEvent&&window.attachEvent("onload",function(){t._onloadAction.apply(t)})}catch(n){}},_onloadAction:function(){if(this._validate()){var e=this;setTimeout(function(){e.context.isSend||(e._send(),e.context.isSend=!0)},100)}},_validate:function(){if(!this._filter())return!1;var e=this.config.rate;return!(0===e||9>e&&!this._lottery(e))},_lottery:function(e){var t=Math.floor(100*Math.random())%10;return e>=t},_lotteryResource:function(e){var t=Math.floor(1e3*Math.random())%100,n=!1;return 0===e?n=!1:e-1>=t&&t>=0&&(n=!0),n},_serial:function(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},_send:function(){var e={userInfo:this._getUserInfo(),pageInfo:this._getPageInfo(),pageTimeingInfo:this._getPageTiming()},t=this._serial(e.userInfo)+"&"+this._serial(e.pageInfo)+"&"+this._serial(e.pageTimeingInfo),n=new Image;n.onload=function(){n=null},n.src=r.receiverUrl+"?"+t;try{this._sendResource()}catch(i){}},_serialResource:function(e){var t=[],n="|-|";for(var r in e)t.push(r+"="+encodeURIComponent(e[r]));return t.join(n)},_sendResource:function(){if("performance"in window&&"getEntriesByType"in window.performance&&window.performance.getEntriesByType("resource")instanceof Array){var e=this.config.resourceRate,t=this._lotteryResource(e);if(t){var n=this._getResourceTiming(),r=50;if(n.length>r){for(var i=[],o=[],a=0;a<n.length;a++)r>a?i.push(n[a]):o.push(n[a]);this._sendResourceData(i,1,2),this._sendResourceData(o,2,2)}else this._sendResourceData(n,1,1)}}},_sendResourceData:function(e,t,n){for(var i={pageInfo:this._getPageId(),resourceTimeingInfo:e,index:{index:t},total:{total:n}},o="|--|",a=this._serial(i.pageInfo)+o+this._serial(i.index)+o+this._serial(i.total)+o+"resoucecount="+i.resourceTimeingInfo.length,s=0;s<i.resourceTimeingInfo.length;s++)a+=o+this._serialResource(i.resourceTimeingInfo[s]);var c="new-page-timing-iframe"+t;if(!document.getElementById(c)){var d=document.createElement("div");d.innerHTML='<iframe width="0" height="0" id="'+c+'" name="'+c+'" frameBorder="0" style="top: -100%; position: absolute;"></iframe>',document.body.appendChild(d);var u=document.createElement("form");u.style.display="none",u.target=c,u.method="POST",u.action=r.receiverUrl;var f=document.createElement("input");f.type="hidden",f.name="resourcetiming",f.value=a,u.appendChild(f),document.body.appendChild(u),u.submit()}},_filter:function(){var e=navigator.userAgent.toLowerCase();return new RegExp(this.config.filterRegular).test(e)?!1:window.performance&&window.performance.timing?(this.context.timing=window.performance.timing,!0):!1},_getCookie:function(e){var t="(?:; )?"+e+"=([^;]*);?",r=new RegExp(t);if(r.test(document.cookie)){var i=decodeURIComponent(RegExp.$1);return n(i).length>0?i:"-"}return"-"},_getUserInfo:function(){var e={},t="",n=!0,r=this._getCookie("xman_us_f");"-"===r&&(r="");var i=/x_user=([^&"]+)/;return r&&i.test(r)&&(r.match(i),r=RegExp.$1,r=r.split("|"),r.length>=5&&(t=r[4])),n=""!==t?!1:!0,e.memberSeq=t,e.isNewUser=n,e},_getPageId:function(){return{pageId:r.pageId,parentPageId:r.parentPageId}},_getPageInfo:function(){return{pageId:r.pageId,parentPageId:r.parentPageId,pageType:r.pageType,site:r.site}},_getPageTiming:function(){var e=this.context.timing,t={ns:e.navigationStart,ules:e.unloadEventStart,ulee:e.unloadEventEnd,rs:e.redirectStart,re:e.redirectEnd,fs:e.fetchStart,dls:e.domainLookupStart,dle:e.domainLookupEnd,cs:e.connectStart,ce:e.connectEnd,scs:e.secureConnectionStart||0,resqs:e.requestStart,resps:e.responseStart,respe:e.responseEnd,dl:e.domLoading,di:e.domInteractive,dcles:e.domContentLoadedEventStart,dclee:e.domContentLoadedEventEnd,domc:e.domComplete,les:e.loadEventStart,lee:e.loadEventEnd,srt:this._getStartRenderTiming(),fst:this._getFirstPageTiming()},n=t.ns;for(var r in t)t[r]=t[r]-n<0?0:t[r]-n;return t},_getResourceTiming:function(){var e=[],t=window.performance.getEntriesByType("resource"),n=function(e){return void 0===e||0===e?0:Math.floor(e)};for(var r in t){var i=t[r];void 0!==i.initiatorType&&e.push({rs:n(i.redirectStart),re:n(i.redirectEnd),fs:n(i.fetchStart),st:n(i.startTime),dls:n(i.domainLookupStart),dle:n(i.domainLookupEnd),cs:n(i.connectStart),ce:n(i.connectEnd),scs:n(i.secureConnectionStart),resqs:n(i.requestStart),resps:n(i.responseStart),respe:n(i.responseEnd),restype:i.initiatorType,n:i.name})}return e},_getStartRenderTiming:function(){var e=this.context.timing,t=r.startRender;return e.msFirstPaint&&e.msFirstPaint>0?e.msFirstPaint:window.chrome&&"function"==typeof window.chrome.loadTimes&&window.chrome.loadTimes().firstPaintTime>0?Math.ceil(1e3*window.chrome.loadTimes().firstPaintTime):t>0?t:0},_getFirstPageTiming:function(){var e=r.firstScreen;return e>0?e:0}},(new i).init()}]);